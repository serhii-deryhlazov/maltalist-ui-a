<div id="listing-details" *ngIf="listing">
  <div class="listing-images">
    <div class="carousel-container">
      <div class="carousel-main">
        <img
          id="carousel-big-img"
          [src]="currentImage"
          alt="Listing image"
          *ngIf="listing.picture1">
        <div *ngIf="!listing.picture1" class="no-image">
          No images available
        </div>
      </div>
    </div>
  </div>

  <div class="listing-details-info">
    <h2>{{ listing.title }}</h2>
    <p class="price">â‚¬{{ listing.price }}</p>
    <p class="category"><strong>Category:</strong> {{ listing.category }}</p>
    <p class="location"><strong>Location:</strong> {{ listing.location }}</p>
    <p class="description">{{ listing.description }}</p>

    <div class="listing-meta">
      <div>
        <span class="material-symbols-outlined">schedule</span>
        {{ formatDate(listing.createdAt) }}
      </div>
      <div *ngIf="listing.isPromoted" class="promoted-badge">Promoted</div>
    </div>

    <div class="listing-buttons">
      <button
        id="listing-contact"
        (click)="contactSeller()"
        *ngIf="!isOwner">
        <span class="material-symbols-outlined">contact_mail</span>
        Contact Seller
      </button>

      <div *ngIf="isOwner" class="owner-buttons">
        <button id="edit-listing-btn" (click)="editListing()">
          <span class="material-symbols-outlined">edit</span>
          Edit Listing
        </button>
        <button id="delete-listing-btn" (click)="deleteListing()">
          <span class="material-symbols-outlined">delete</span>
          Delete Listing
        </button>
      </div>
    </div>

    <button class="copy-btn" (click)="copyToClipboard()">
      <span class="material-symbols-outlined">content_copy</span>
      Copy Link
    </button>
  </div>
</div>

<div *ngIf="!listing" class="loading">
  <p>Loading listing details...</p>
</div>
